<!DOCTYPE html><html lang="en"><head><title>Making of Interactive Black History Tube Map | jimle.uk</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width"><link rel="alternate" hreflang="x-default" href="https://www.jimle.uk/posts/making-of-interactive-black-history-tube-map.html"><meta content="jimle.uk" name="og:site_name"><meta content="Making of Interactive Black History Tube Map" name="og:title"><meta content="https://www.jimle.uk/posts/making-of-interactive-black-history-tube-map.html" name="og:url"><meta content="A personal blog about developing for the web by Jim Le, a web developer based in London, UK" name="og:description"><meta content="website" name="og:type"><meta content="https://www.jimle.uk/static/img/site_icon.png?t=1656180138007" name="og:image"><link rel="stylesheet" href="https://www.jimle.uk/static/css/main.css?t=1656180138007"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://www.jimle.uk/rss.xml"><link rel="shortcut icon" href="https://www.jimle.uk/static/img/site_icon.png?t=1656180138007" type="image/png"><link rel="icon" href="https://www.jimle.uk/static/img/site_icon.png?t=1656180138007" type="image/x-icon"><link rel="prefetch" href="https://www.jimle.uk/posts/a-rant-about-reviewing-code.html"></head><body><div class="overlay"></div><div class="page"><div class="header"><div class="container"><div class="row"><div class="col-xs-8"><div class="header__title"><a href="https://www.jimle.uk/">Claypot Mousetail Noodles üçú</a></div></div></div></div><div class="nav__row"><div class="container"><div class="row"><div class="col-xs-8"><span class="nav__item nav__social"><a href="https://twitter.com/jimle_uk">@jimle_uk</a></span><span class="nav__item nav__tagline">Helping digital product teams do their best work</span></div></div></div></div></div><div class="content"><div class="post"><div class="post__header"><div class="container"><div class="row"><div class="col-xs-12 col-md-7"><div class="post__title"><h1><a href="https://www.jimle.uk/posts/making-of-interactive-black-history-tube-map.html">Making of Interactive Black History Tube Map</a></h1><div class="post__meta"><span class="post__date">Saturday, 25th Jun 2022</span><div class="post__tags"><a href="https://www.jimle.uk/tags.html#retrospective">#retrospective</a></div></div></div></div></div></div></div><div class="post__body m-b-3"><div class="container"><div class="row"><div class="col-xs-12 col-md-7"><div class="post__body__contents"><p><video width="100%" height="auto" controls=true muted=true>
              <source src="https://res.cloudinary.com/daglih2g8/video/upload/v1656166010/jimle.uk/posts/20220625/1_y7jxpt.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video></p>
<p>I had a chance to redo the layout on <a href="https://jimleuk.github.io/interactive-blackhistorytubemap/">interactive-blackhistorytubemap</a> recently so I thought I'd create a quick post to document some of things I did for this mini project.</p>
<nav class="table-of-contents"><ol><li><a href="#getting-the-initial-data">Getting the Initial Data</a></li><li><a href="#creating-a-dynamic-tube-map">Creating a Dynamic Tube Map</a></li><li><a href="#setting-up-a-simple-data-api">Setting up a Simple Data API</a></li><li><a href="#building-and-publishing-the-site">Building and Publishing the Site</a></li><li><a href="#conclusion">Conclusion</a></li></ol></nav><hr>
<h2 id="getting-the-initial-data" tabindex="-1"><a class="header-anchor" href="#getting-the-initial-data">Getting the Initial Data</a></h2>
<p><a href="https://res.cloudinary.com/daglih2g8/image/upload/v1656177871/jimle.uk/posts/20220625/3_rnzfrn.png"><img src="https://res.cloudinary.com/daglih2g8/image/upload/v1656177871/jimle.uk/posts/20220625/3_rnzfrn.png" alt="web scraping script using crystal lang"></a></p>
<p>Fortunately, The black cultural archives website had the page listing all the names, organisations and events on the tube map <a href="https://blackculturalarchives.org/bca-x-tfl">https://blackculturalarchives.org/bca-x-tfl</a>. I think if this page didn't exist, this project would have likely taken a lot longer.</p>
<p>I wrote a simple script using <a href="https://crystal-lang.org/">Crystal</a><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> to download a snapshot of website page and extract the data from the html. The plan was to enrich this data with images, reference links and mapping to stations - it would take about a month to complete this exercise!</p>
<h2 id="creating-a-dynamic-tube-map" tabindex="-1"><a class="header-anchor" href="#creating-a-dynamic-tube-map">Creating a Dynamic Tube Map</a></h2>
<p><a href="https://res.cloudinary.com/daglih2g8/image/upload/v1656177871/jimle.uk/posts/20220625/2_nmoah7.png"><img src="https://res.cloudinary.com/daglih2g8/image/upload/v1656177871/jimle.uk/posts/20220625/2_nmoah7.png" alt="Using Figma to create a SVG tube map with hotspots"></a></p>
<p>There were a few approaches I consider to handle user interaction I envisioned with the tubemap. Ultimately, the quickest and easiest option was to manipulate via DOM an existing SVG of the tubemap once it was rendered in the webpage.</p>
<p>However, existing SVGs were optimised for display and ultimately I had to modify my own version of the SVG to mark out station nodes and their labels. <a href="https://figma.com">Figma</a> was huge help here - it's ability to define id attributes for nodes meant I didn't have to do this by hand<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>.</p>
<h2 id="setting-up-a-simple-data-api" tabindex="-1"><a class="header-anchor" href="#setting-up-a-simple-data-api">Setting up a Simple Data API</a></h2>
<p><a href="https://res.cloudinary.com/daglih2g8/image/upload/v1656177871/jimle.uk/posts/20220625/4_ocbs1j.png"><img src="https://res.cloudinary.com/daglih2g8/image/upload/v1656177871/jimle.uk/posts/20220625/4_ocbs1j.png" alt="Using Supabase to make the data publically available"></a></p>
<p>I've been following <a href="https://supabase.com">Supabase</a> for a while and wanted an excuse to try out the service. Before anyone mentions, I realise a database is kinda overkill for this project - I initially had a version of the site which had json files loaded client side!</p>
<p>Using Supabase however did make it easier to edit the data later and offering automatic <a href="https://github.com/pgrest/pgrest">pgrest</a> integration meant it took me no time at all to get the API working<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>.</p>
<h2 id="building-and-publishing-the-site" tabindex="-1"><a class="header-anchor" href="#building-and-publishing-the-site">Building and Publishing the Site</a></h2>
<p><a href="https://res.cloudinary.com/daglih2g8/image/upload/v1656177871/jimle.uk/posts/20220625/5_dpbddk.png"><img src="https://res.cloudinary.com/daglih2g8/image/upload/v1656177871/jimle.uk/posts/20220625/5_dpbddk.png" alt="Publishing via github pages"></a></p>
<p>For this project, I decided to try <a href="https://kit.svelte.dev">Svelte Kit</a> which is a app framework using <a href="https://svelte.dev">SvelteJS</a> after having not touched svelte for more than a year. Overall using Svelte Kit was fun but for me, Svelte's reactivity model and sync/async data handling are still challenging concepts - I guess it's just not how my brain works. In the end, the site is static-generated which</p>
<p>To publish the project, I opted to simple use Github pages rather than opting for services like Vercel or Netlify. If I were to go the route of these more advanced hosting solutions, I'd probably want to build backend stuff to justify the extra effort<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>.</p>
<h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion">Conclusion</a></h2>
<p>Compiling and enriching the data was real challenge of this project and in the future, I'd definitely consider outsourcing some of that effort. The development of the site itself was quite easy in comparison and in my opinion, the modern day developer is spoiled for choice when it comes to how they build their apps and where they choose to host them.</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>There was no particular advantage for me to using Crystal other than curiousity and learning. I definitely could have saved a bunch of time using Node. <a href="#fnref1" class="footnote-backref">‚Ü©Ô∏é</a></p>
</li>
<li id="fn2" class="footnote-item"><p>If you label a shape/element, Figma will render that label as the element's id attribute when you export to SVG. <a href="#fnref2" class="footnote-backref">‚Ü©Ô∏é</a></p>
</li>
<li id="fn3" class="footnote-item"><p>This PgRest endpoint is automatically exposed and the site currently accesses it using a public API key. AFAIK there isn't a way to restrict the API to a particular site so if be aware if you want to try the same solution for your API. <a href="#fnref3" class="footnote-backref">‚Ü©Ô∏é</a></p>
</li>
<li id="fn4" class="footnote-item"><p>Ideas could be bookmarking, ability to contribute changes to the data, creating your own tube maps? In any case, perhaps for another project. <a href="#fnref4" class="footnote-backref">‚Ü©Ô∏é</a></p>
</li>
</ol>
</section>
</div></div></div></div></div><div class="post__footer p-b-3"><div class="container"><div class="row"><div class="col-xs-12 col-md-7"><hr class="m-b-2"><div class="intro"><div class="intro-left p-r-1"><img src="https://www.jimle.uk/static/img/site_icon.png?t=1656180138007" align="left"></div><div class="intro-right"><div class="m-b-1"><strong>Jim Le is a digital product developer</strong>
<br> He/Him. I like building digital products and teams but can never find the time to talk about
either. I tweet more frequently, this blog is for longer rants.</div><ul class="social"><li><a href="https://github.com/jimleuk"><img src="https://www.jimle.uk/static/img/github.svg?t=1656180138007" width="24"></a></li><li><a href="http://twitter.com/jimle_uk"><img src="https://www.jimle.uk/static/img/twitter.svg?t=1656180138007" width="24"></a></li><li><a href="https://uk.linkedin.com/in/jimleuk"><img src="https://www.jimle.uk/static/img/linkedin.svg?t=1656180138007" width="24"></a></li></ul></div></div><hr class="m-t-2"></div></div><div class="row"><div class="col-xs-12 col-md-7"><div class="row"><div class="col-xs-12 col-md-6"><div class="post__footer__item"><p>Previously</p><div class="post__card"><h3><a href="https://www.jimle.uk/posts/a-rant-about-reviewing-code.html">A Rant about Reviewing Code</a></h3><strong>Saturday, 18th Jun 2022</strong><div class="post__tags"><a href="https://www.jimle.uk/tags.html#programming">#programming</a></div></div></div></div></div></div></div></div></div></div></div></div></body></html>